<div class="container" *ngIf="!isLoading">
  <mat-card class="main-mat-card">
    <mat-card-content>
      <form [formGroup]="searchForm">
        <div fxLayout="row wrap">
          <div *ngIf="containsControl('mainCategoryId')" class="app-form-control">
            <mat-form-field appearance="legacy">
              <mat-select placeholder="Основна категория" formControlName="mainCategoryId">
                <mat-option [value]="categoryPair.mainCategory.id" *ngFor="let categoryPair of categories">
                  {{ categoryPair.mainCategory.name }}</mat-option
                >
              </mat-select>
            </mat-form-field>
          </div>

          <div *ngIf="containsControl('make')" class="app-form-control">
            <mat-form-field appearance="legacy">
              <mat-select placeholder="Марка" formControlName="make">
                <mat-optgroup *ngFor="let group of makeGroups | keyvalue" [label]="group.key">
                  <mat-option *ngFor="let make of group.value" [value]="make.make">
                    {{ make.make }}
                  </mat-option>
                </mat-optgroup>
              </mat-select>
            </mat-form-field>
          </div>

          <div *ngIf="containsControl('model')" class="app-form-control">
            <mat-form-field appearance="legacy">
              <mat-select placeholder="Модел" formControlName="model">
                <mat-option [value]="model" *ngFor="let model of models">{{ model }}</mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div *ngIf="containsControl('engineType')" class="app-form-control">
            <mat-form-field appearance="legacy">
              <mat-select placeholder="Тип двигател" formControlName="engineType">
                <mat-option [value]="getEnumValue(name, engineType)" *ngFor="let name of engineType | enumToArray">
                  {{ getEnumValue(name, engineType) }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div *ngIf="containsControl('gearboxType')" class="app-form-control">
            <mat-form-field appearance="legacy">
              <mat-select placeholder="Скоростна кутия" formControlName="gearboxType">
                <mat-option [value]="getEnumValue(name, gearboxType)" *ngFor="let name of gearboxType | enumToArray">
                  {{ getEnumValue(name, gearboxType) }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div *ngIf="containsControl('subCategoryId')" class="app-form-control">
            <mat-form-field appearance="legacy">
              <mat-select placeholder="Категория" formControlName="subCategoryId">
                <mat-option [value]="subCategory.id" *ngFor="let subCategory of subCategories">
                  {{ subCategory.name }}</mat-option
                >
              </mat-select>
            </mat-form-field>
          </div>

          <div *ngIf="containsControl('coolingType')" class="app-form-control">
            <mat-form-field appearance="legacy">
              <mat-select placeholder="Вид охлаждане" formControlName="coolingType">
                <mat-option [value]="getEnumValue(name, coolingType)" *ngFor="let name of coolingType | enumToArray">
                  {{ getEnumValue(name, coolingType) }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div *ngIf="containsControl('numberOfAxels')" class="app-form-control">
            <mat-form-field appearance="legacy">
              <input matInput type="number" placeholder="Брой оси" formControlName="numberOfAxels" />
            </mat-form-field>
          </div>

          <div *ngIf="containsControl('numberOfSeats')" class="app-form-control">
            <mat-form-field appearance="legacy">
              <input matInput type="number" placeholder="Брой места" formControlName="numberOfSeats" />
            </mat-form-field>
          </div>

          <div
            *ngIf="containsControl('weightCapacityMin') || containsControl('weightCapacityMax')"
            class="app-form-control"
          >
            <div class="inline-control" *ngIf="containsControl('weightCapacityMin')">
              <mat-form-field appearance="legacy">
                <input matInput type="number" placeholder="Мин.товароносимост" formControlName="weightCapacityMin" />
                <mat-hint>в килограми</mat-hint>
              </mat-form-field>
            </div>
            <div class="inline-control" *ngIf="containsControl('weightCapacityMax')">
              <mat-form-field appearance="legacy">
                <input matInput type="number" placeholder="Макс.товароносимост" formControlName="weightCapacityMax" />
                <mat-hint>в килограми</mat-hint>
              </mat-form-field>
            </div>
          </div>

          <div class="app-form-control" *ngIf="containsControl('priceMin') || containsControl('priceMax')">
            <div class="inline-control" *ngIf="containsControl('priceMin')">
              <mat-form-field appearance="legacy">
                <input matInput type="number" placeholder="Цена от (лв.)" formControlName="priceMin" />
              </mat-form-field>
            </div>
            <div class="inline-control" *ngIf="containsControl('priceMax')">
              <mat-form-field appearance="legacy">
                <input matInput type="number" placeholder="Цена до (лв.)" formControlName="priceMax" />
              </mat-form-field>
            </div>
          </div>

          <div
            class="app-form-control"
            *ngIf="containsControl('dateOfManufactureFrom') || containsControl('dateOfManufactureTo')"
          >
            <div class="inline-control" *ngIf="containsControl('dateOfManufactureFrom')">
              <mat-form-field appearance="legacy">
                <mat-select placeholder="Година от" formControlName="dateOfManufactureFrom">
                  <mat-option [value]="year" *ngFor="let year of years">{{ year }}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="inline-control" *ngIf="containsControl('dateOfManufactureTo')">
              <mat-form-field appearance="legacy">
                <mat-select placeholder="Година до" formControlName="dateOfManufactureTo">
                  <mat-option [value]="year" *ngFor="let year of years">{{ year }}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>

          <div *ngIf="containsControl('mileageMax')" class="app-form-control">
            <mat-form-field appearance="legacy">
              <input matInput type="number" placeholder="Макс.пробег" formControlName="mileageMax" />
              <mat-hint>в километри</mat-hint>
            </mat-form-field>
          </div>

          <div *ngIf="containsControl('color')" class="app-form-control">
            <mat-form-field appearance="legacy">
              <mat-select placeholder="Цвят" formControlName="color">
                <mat-option [value]="color" *ngFor="let color of colors">
                  {{ color }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div *ngIf="containsControl('region')" class="app-form-control">
            <mat-form-field appearance="legacy">
              <mat-select placeholder="Регион" formControlName="region">
                <mat-option [value]="region.key" *ngFor="let region of regions | keyvalue">
                  {{ region.key }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div *ngIf="containsControl('city')" class="app-form-control">
            <mat-form-field appearance="legacy">
              <mat-select placeholder="Населено място" formControlName="city">
                <mat-option [value]="city" *ngFor="let city of cities">{{ city }}</mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div class="app-form-control" *ngIf="containsControl('cubatureMin') || containsControl('cubatureMax')">
            <div class="inline-control" *ngIf="containsControl('cubatureMin')">
              <mat-form-field appearance="legacy">
                <input matInput type="number" placeholder="Мин.кубатура" formControlName="cubatureMin" />
              </mat-form-field>
            </div>
            <div class="inline-control" *ngIf="containsControl('cubatureMax')">
              <mat-form-field appearance="legacy">
                <input matInput type="number" placeholder="Макс.кубатура" formControlName="cubatureMin" />
              </mat-form-field>
            </div>
          </div>

          <div *ngIf="containsControl('engineCategoryType')" class="app-form-control">
            <mat-form-field appearance="legacy">
              <mat-select placeholder="Вид двигател" formControlName="engineCategoryType">
                <mat-option
                  [value]="getEnumValue(name, engineCategoryType)"
                  *ngFor="let name of engineCategoryType | enumToArray"
                >
                  {{ getEnumValue(name, engineCategoryType) }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div *ngIf="containsControl('totalWeightMin')" class="app-form-control">
            <mat-form-field appearance="legacy">
              <input matInput type="number" placeholder="Мин.обща маса" formControlName="totalWeightMin" />
              <mat-hint>в килограми</mat-hint>
            </mat-form-field>
          </div>

          <div *ngIf="containsControl('workingVolumeMin')" class="app-form-control">
            <mat-form-field appearance="legacy">
              <input matInput type="number" placeholder="Мин.работен обем" formControlName="workingVolumeMin" />
              <mat-hint>в килограми</mat-hint>
            </mat-form-field>
          </div>

          <div *ngIf="containsControl('hoursOfOperationMax')" class="app-form-control">
            <mat-form-field appearance="legacy">
              <input matInput type="number" placeholder="Макс.часове работа" formControlName="hoursOfOperationMax" />
            </mat-form-field>
          </div>

          <div class="app-form-control" *ngIf="containsControl('horsePowerMin') || containsControl('horsePowerMax')">
            <div class="inline-control" *ngIf="containsControl('horsePowerMin')">
              <mat-form-field appearance="legacy">
                <input matInput type="number" placeholder="Мощност от" formControlName="horsePowerMin" />
                <mat-hint>в конски сили</mat-hint>
              </mat-form-field>
            </div>
            <div class="inline-control" *ngIf="containsControl('horsePowerMax')">
              <mat-form-field appearance="legacy">
                <input matInput type="number" placeholder="Мощност до" formControlName="horsePowerMax" />
                <mat-hint>в конски сили</mat-hint>
              </mat-form-field>
            </div>
          </div>
          <div *ngIf="containsControl('emissionStandartType')" class="app-form-control">
            <mat-form-field appearance="legacy">
              <mat-select placeholder="Евростандарт" formControlName="emissionStandartType">
                <mat-option
                  [value]="getEnumValue(name, emissionStandartType)"
                  *ngFor="let name of emissionStandartType | enumToArray"
                >
                  {{ getEnumValue(name, emissionStandartType) }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div *ngIf="containsControl('numberOfBeds')" class="app-form-control">
            <mat-form-field appearance="legacy">
              <input matInput type="number" placeholder="Брой легла" formControlName="numberOfBeds" />
            </mat-form-field>
          </div>

          <div *ngIf="containsControl('toiletType')" class="app-form-control">
            <mat-form-field appearance="legacy">
              <mat-select placeholder="Тоалетна" formControlName="toiletType">
                <mat-option [value]="getEnumValue(name, toiletType)" *ngFor="let name of toiletType | enumToArray">
                  {{ getEnumValue(name, toiletType) }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div *ngIf="containsControl('heatingType')" class="app-form-control">
            <mat-form-field appearance="legacy">
              <mat-select placeholder="Отопление" formControlName="heatingType">
                <mat-option [value]="getEnumValue(name, heatingType)" *ngFor="let name of heatingType | enumToArray">
                  {{ getEnumValue(name, heatingType) }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div *ngIf="containsControl('airConditionType')" class="app-form-control">
            <mat-form-field appearance="legacy">
              <mat-select placeholder="Климатик" formControlName="airConditionType">
                <mat-option
                  [value]="getEnumValue(name, airConditionType)"
                  *ngFor="let name of airConditionType | enumToArray"
                >
                  {{ getEnumValue(name, airConditionType) }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div *ngIf="containsControl('lengthSizeMax')" class="app-form-control">
            <mat-form-field appearance="legacy">
              <input matInput type="number" placeholder="Макс.дължина" formControlName="lengthSizeMax" />
              <mat-hint>в метри</mat-hint>
            </mat-form-field>
          </div>

          <div *ngIf="containsControl('materialType')" class="app-form-control">
            <mat-form-field appearance="legacy">
              <mat-select placeholder="Материал" formControlName="materialType">
                <mat-option [value]="getEnumValue(name, materialType)" *ngFor="let name of materialType | enumToArray">
                  {{ getEnumValue(name, materialType) }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div *ngIf="containsControl('widthMax')" class="app-form-control">
            <mat-form-field appearance="legacy">
              <input matInput type="number" placeholder="Макс.широчина" formControlName="widthMax" />
              <mat-hint>в метри</mat-hint>
            </mat-form-field>
          </div>

          <div *ngIf="containsControl('bicycleSize')" class="app-form-control">
            <mat-form-field appearance="legacy">
              <mat-select placeholder="Размер" formControlName="bicycleSize">
                <mat-option [value]="size" *ngFor="let size of bicycleSizes">{{ size }}</mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div *ngIf="containsControl('numberOfGears')" class="app-form-control">
            <mat-form-field appearance="legacy">
              <mat-select placeholder="Скорости" formControlName="numberOfGears">
                <mat-option [value]="gears" *ngFor="let gears of numberOfGears">{{ gears }}</mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div *ngIf="containsControl('conditionType')" class="app-form-control">
            <div class="form-control-condition">
              <label>Състояние:</label>
              <mat-radio-group class="condition-radio-group" formControlName="conditionType">
                <mat-radio-button
                  color="primary"
                  class="condition-radio-button"
                  [value]="getEnumValue(name, conditionType)"
                  *ngFor="let name of conditionType | enumToArray"
                >
                  {{ getEnumValue(name, conditionType) }}</mat-radio-button
                >
              </mat-radio-group>
            </div>
          </div>
        </div>
        <div>
          <button type="submit" mat-raised-button color="primary" (click)="submitSearchForm()">Търси</button>
          <button type="button" mat-raised-button color="warn" (click)="clean()">Изчисти</button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>
